<!DOCTYPE html>
<html lang="eu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taula periodikoa ‚Äî Euskera (Mugikorra)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.min.js"></script>
    <style>
        :root {
            --primary-color: #3A795E;
            --bg-dark: #0a0a0a;
            --bg-card: #111111;
            --text-light: #e6e6e6;
            --text-muted: #cccccc;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Segoe UI, Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg-dark);
            color: var(--text-light);
            overflow-x: hidden;
            height: 100vh;
        }

        /* Pantalla principal */
        .main-screen {
            padding: 20px;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .onddi-title {
            font-family: 'Arista 2.0 Alternate', sans-serif;
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 25px;
            letter-spacing: 1px;
        }

        .search-container {
            margin-bottom: 20px;
        }

        .search-box {
            width: 100%;
            padding: 14px 18px;
            background: linear-gradient(180deg, var(--bg-card), #0d0d0d);
            border: 1px solid rgba(58, 121, 94, 0.3);
            border-radius: 10px;
            color: var(--text-light);
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-box:focus {
            border-color: rgba(58, 121, 94, 0.6);
            box-shadow: 0 0 15px rgba(58, 121, 94, 0.3);
        }

        .search-results {
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
            border-radius: 8px;
            background: var(--bg-card);
            border: 1px solid rgba(58, 121, 94, 0.2);
            display: none;
        }

        .search-result-item {
            padding: 12px 16px;
            border-bottom: 1px solid rgba(58, 121, 94, 0.1);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item:hover {
            background: rgba(58, 121, 94, 0.1);
        }

        .search-result-item .sym {
            font-weight: bold;
            font-size: 18px;
            margin-right: 8px;
        }

        .search-result-item .name {
            font-size: 14px;
        }

        .search-result-item .z {
            float: right;
            color: var(--text-muted);
            font-size: 14px;
        }

        /* Botones de funcionalidades */
        .function-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .func-btn {
            background: linear-gradient(180deg, var(--bg-card), #0d0d0d);
            border: 1px solid rgba(58, 121, 94, 0.2);
            border-radius: 10px;
            color: var(--text-light);
            padding: 16px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 80px;
        }

        .func-btn:hover {
            border-color: rgba(58, 121, 94, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .func-btn .icon {
            font-size: 24px;
            margin-bottom: 8px;
            color: var(--primary-color);
        }

        /* Informaci√≥n del elemento */
        .element-info {
            background: linear-gradient(180deg, var(--bg-card), #0d0d0d);
            border-radius: 10px;
            padding: 16px;
            border: 1px solid rgba(58, 121, 94, 0.2);
            margin-top: 20px;
            display: none;
        }

        .element-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }

        .element-square {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 28px;
            margin-right: 14px;
            color: #000 !important;
        }

        .element-name {
            font-size: 20px;
            font-weight: 700;
        }

        .element-z {
            color: var(--text-muted);
            font-size: 14px;
        }

        .element-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .detail-item {
            margin-bottom: 10px;
        }

        .detail-label {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .detail-value {
            font-size: 14px;
            color: var(--text-light);
        }

        /* Pantalla de tabla peri√≥dica */
        .table-screen {
            display: none;
            height: 100vh;
            overflow: hidden;
            transform: rotate(90deg);
            transform-origin: center center;
            width: 100vh;
            height: 100vw;
            position: fixed;
            top: 50%;
            left: 50%;
            margin-top: -50vw;
            margin-left: -50vh;
        }

        .table-container {
            padding: 10px;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .back-btn {
            background: rgba(58, 121, 94, 0.2);
            border: none;
            color: var(--text-light);
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
        }

        .table-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-light);
        }

        .table-controls {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .control-toggle {
            background: rgba(58, 121, 94, 0.1);
            border: 1px solid rgba(58, 121, 94, 0.2);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--text-light);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 0;
            text-align: center;
        }

        .control-toggle.active {
            background: rgba(58, 121, 94, 0.3);
            border-color: rgba(58, 121, 94, 0.4);
        }

        .periodic-table {
            flex: 1;
            overflow: auto;
            background: linear-gradient(180deg, #111111, #151515);
            border-radius: 8px;
            padding: 8px;
            border: 1px solid rgba(58, 121, 94, 0.2);
        }

        .periodic {
            display: grid;
            grid-template-columns: repeat(18, 1fr);
            gap: 4px;
        }

        .cell {
            background: rgba(30, 30, 30, 0.8);
            border-radius: 4px;
            padding: 4px;
            color: var(--text-light);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            font-size: 10px;
            border: 1px solid rgba(58, 121, 94, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            aspect-ratio: 1;
        }

        .cell .num {
            font-size: 8px;
            opacity: 0.85;
        }

        .cell .sym {
            font-size: 16px;
            font-weight: 400;
            line-height: 1;
            text-align: center;
            margin: 2px 0;
        }

        .cell .ename {
            font-size: 8px;
            opacity: 0.95;
            line-height: 1.05;
            font-weight: 600;
            text-align: center;
        }

        .cell:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(58, 121, 94, 0.3);
            border-color: rgba(58, 121, 94, 0.3);
        }

        .bottom-series-container {
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .bottom-series {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            gap: 4px;
            background: linear-gradient(180deg, #111111, #151515);
            padding: 8px;
            border-radius: 6px;
            border: 1px solid rgba(58, 121, 94, 0.2);
        }

        /* Colores de categor√≠as */
        .alkali { background: #FFB6C1; color: #333 }
        .alkaline { background: #FFD8B1; color: #333 }
        .lanthanide { background: #C9E4DE; color: #333 }
        .actinide { background: #D8BFD8; color: #333 }
        .transition { background: #B0E0E6; color: #333 }
        .post-transition { background: #E6E6FA; color: #333 }
        .metalloid { background: #98FB98; color: #333 }
        .nonmetal { background: #F0E68C; color: #333 }
        .halogen { background: #FFDEAD; color: #333 }
        .noble { background: #DDA0DD; color: #333 }

        /* Colores de bloques electr√≥nicos */
        .s-block { background: #FFB6C1 !important; color: #333; }
        .p-block { background: #B19CD9 !important; color: #333; }
        .d-block { background: #87CEEB !important; color: #333; }
        .f-block { background: #FFDAC1 !important; color: #333; }

        /* Pantalla de orbitales 3D */
        .orbitals-screen {
            display: none;
            height: 100vh;
            padding: 20px;
            overflow: hidden;
        }

        .orbitals-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .orbitals-title {
            font-size: 22px;
            font-weight: 600;
            color: var(--text-light);
        }

        .orbitals-categories {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .orbital-category {
            background: linear-gradient(180deg, var(--bg-card), #0d0d0d);
            border-radius: 10px;
            border: 1px solid rgba(58, 121, 94, 0.2);
            overflow: hidden;
        }

        .orbital-category-header {
            padding: 14px 16px;
            background: rgba(58, 121, 94, 0.1);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .orbital-category-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .orbital-category-icon {
            color: var(--primary-color);
            transition: transform 0.3s ease;
        }

        .orbital-category.active .orbital-category-icon {
            transform: rotate(180deg);
        }

        .orbital-list {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .orbital-category.active .orbital-list {
            max-height: 500px;
        }

        .orbital-btn {
            background: transparent;
            border: none;
            color: var(--text-light);
            padding: 12px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            width: 100%;
            border-bottom: 1px solid rgba(58, 121, 94, 0.1);
        }

        .orbital-btn:last-child {
            border-bottom: none;
        }

        .orbital-btn:hover {
            background: rgba(58, 121, 94, 0.1);
            padding-left: 20px;
        }

        .orbital-btn.active {
            background: rgba(58, 121, 94, 0.2);
            box-shadow: inset 0 0 10px rgba(58, 121, 94, 0.3);
        }

        .orbital-viewer {
            flex: 1;
            background: #0a0a0a;
            border-radius: 10px;
            border: 1px solid rgba(58, 121, 94, 0.2);
            position: relative;
            overflow: hidden;
            margin-top: 20px;
            display: none;
        }

        .orbital-canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        .orbital-info {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(17, 17, 17, 0.8);
            padding: 10px 14px;
            border-radius: 8px;
            border: 1px solid rgba(58, 121, 94, 0.2);
            max-width: 80%;
        }

        .orbital-info-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 4px;
        }

        .orbital-info-desc {
            font-size: 12px;
            color: var(--text-light);
            line-height: 1.3;
        }

        .orbital-controls {
            position: absolute;
            bottom: 10px;
            right: 10px;
            display: flex;
            gap: 8px;
        }

        .orbital-control-btn {
            background: rgba(58, 121, 94, 0.2);
            border: none;
            color: var(--text-light);
            width: 36px;
            height: 36px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
        }

        .orbital-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--text-light);
            font-size: 16px;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .function-buttons {
                grid-template-columns: 1fr;
            }
            
            .element-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Pantalla principal -->
    <div class="main-screen" id="mainScreen">
        <div class="onddi-title">ONDDI AKADEMIA</div>
        
        <div class="search-container">
            <input type="text" class="search-box" id="searchInput" placeholder="Bilatu elementua...">
            <div class="search-results" id="searchResults"></div>
        </div>
        
        <div class="function-buttons">
            <button class="func-btn" id="showTableBtn">
                <div class="icon">üß™</div>
                <div>Taula periodikoa</div>
            </button>
            <button class="func-btn" id="showOrbitalsBtn">
                <div class="icon">üî¨</div>
                <div>Orbitalak 3D</div>
            </button>
        </div>
        
        <div class="element-info" id="elementInfo">
            <div class="element-header">
                <div class="element-square" id="elementSquare">‚Äî</div>
                <div>
                    <div class="element-name" id="elementName">Aukeratu elementu bat</div>
                    <div class="element-z" id="elementZ">Z = ‚Äî</div>
                </div>
            </div>
            <div class="element-details">
                <div class="detail-item">
                    <div class="detail-label">Zenbaki atomikoa</div>
                    <div class="detail-value" id="detailZ">‚Äî</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Masa molarra (u)</div>
                    <div class="detail-value" id="detailMass">‚Äî</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Balentziak</div>
                    <div class="detail-value" id="detailVal">‚Äî</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Konfigurazioa</div>
                    <div class="detail-value" id="detailConfig">‚Äî</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Elektronegatibitatea</div>
                    <div class="detail-value" id="detailElectroneg">‚Äî</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Erradio atomikoa (pm)</div>
                    <div class="detail-value" id="detailRadius">‚Äî</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Ionizazio energia (kJ/mol)</div>
                    <div class="detail-value" id="detailIonization">‚Äî</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Pantalla de tabla peri√≥dica -->
    <div class="table-screen" id="tableScreen">
        <div class="table-container">
            <div class="table-header">
                <button class="back-btn" id="backFromTableBtn">‚Üê</button>
                <div class="table-title">Taula Periodikoa</div>
                <div style="width: 40px;"></div> <!-- Espacio para alinear -->
            </div>
            
            <div class="table-controls">
                <button class="control-toggle" id="toggleElec">Orbitalak</button>
                <button class="control-toggle" id="toggleElectroneg">Elektronegatibitatea</button>
                <button class="control-toggle" id="toggleRadius">Erradioa</button>
                <button class="control-toggle" id="toggleIonization">Ionizazioa</button>
            </div>
            
            <div class="periodic-table">
                <div class="periodic" id="table"></div>
                <div class="bottom-series-container">
                    <div class="bottom-series" id="lanthanides"></div>
                    <div class="bottom-series" id="actinides"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Pantalla de orbitales 3D -->
    <div class="orbitals-screen" id="orbitalsScreen">
        <div class="orbitals-header">
            <button class="back-btn" id="backFromOrbitalsBtn">‚Üê</button>
            <div class="orbitals-title">Orbital Atomikoak</div>
        </div>
        
        <div class="orbitals-categories">
            <!-- Categor√≠a s -->
            <div class="orbital-category" id="category-s">
                <div class="orbital-category-header">
                    <div class="orbital-category-title">s Orbitala</div>
                    <div class="orbital-category-icon">‚ñº</div>
                </div>
                <div class="orbital-list">
                    <button class="orbital-btn" data-model="s">s Orbitala</button>
                </div>
            </div>
            
            <!-- Categor√≠a p -->
            <div class="orbital-category" id="category-p">
                <div class="orbital-category-header">
                    <div class="orbital-category-title">p Orbitalak</div>
                    <div class="orbital-category-icon">‚ñº</div>
                </div>
                <div class="orbital-list">
                    <button class="orbital-btn" data-model="p">p Orbitala</button>
                    <button class="orbital-btn" data-model="px">p‚Çì Orbitala</button>
                    <button class="orbital-btn" data-model="py">p·µß Orbitala</button>
                    <button class="orbital-btn" data-model="pz">p‚ÇÇ Orbitala</button>
                </div>
            </div>
            
            <!-- Categor√≠a d -->
            <div class="orbital-category" id="category-d">
                <div class="orbital-category-header">
                    <div class="orbital-category-title">d Orbitalak</div>
                    <div class="orbital-category-icon">‚ñº</div>
                </div>
                <div class="orbital-list">
                    <button class="orbital-btn" data-model="dxy">d‚Çì·µß Orbitala</button>
                    <button class="orbital-btn" data-model="dx2y2">d‚Çì¬≤‚Çã·µß¬≤ Orbitala</button>
                    <button class="orbital-btn" data-model="dyz">d·µß‚ÇÇ Orbitala</button>
                    <button class="orbital-btn" data-model="dzx">d‚ÇÇ‚Çì Orbitala</button>
                    <button class="orbital-btn" data-model="dz2">d‚ÇÇ¬≤ Orbitala</button>
                </div>
            </div>
            
            <!-- Categor√≠a f -->
            <div class="orbital-category" id="category-f">
                <div class="orbital-category-header">
                    <div class="orbital-category-title">f Orbitalak</div>
                    <div class="orbital-category-icon">‚ñº</div>
                </div>
                <div class="orbital-list">
                    <button class="orbital-btn" data-model="f1">f‚ÇÅ Orbitala</button>
                    <button class="orbital-btn" data-model="f2">f‚ÇÇ Orbitala</button>
                    <button class="orbital-btn" data-model="f3">f‚ÇÉ Orbitala</button>
                    <button class="orbital-btn" data-model="f4">f‚ÇÑ Orbitala</button>
                    <button class="orbital-btn" data-model="f5">f‚ÇÖ Orbitala</button>
                    <button class="orbital-btn" data-model="f6">f‚ÇÜ Orbitala</button>
                    <button class="orbital-btn" data-model="f7">f‚Çá Orbitala</button>
                </div>
            </div>
        </div>
        
        <div class="orbital-viewer" id="orbitalViewer">
            <canvas class="orbital-canvas" id="orbitalCanvas"></canvas>
            <div class="orbital-loading" id="orbitalLoading">Kargatzen...</div>
            <div class="orbital-info" id="orbitalInfo">
                <div class="orbital-info-title" id="orbitalInfoTitle">Orbital atomikoak</div>
                <div class="orbital-info-desc" id="orbitalInfoDesc">Hautatu orbital bat menutik ikusteko.</div>
            </div>
            <div class="orbital-controls">
                <button class="orbital-control-btn" id="resetOrbitalView">‚Ü∫</button>
                <button class="orbital-control-btn" id="autoRotateOrbital">‚ñ∂</button>
            </div>
        </div>
    </div>

    <script>
        // Datos completos de los elementos
        const elements = [
            {z:1,sym:'H',name:'Hidrogenoa',mass:1.008,val:[-1,1],config:'1s1',group:'nonmetal',x:1,y:1,radius:53,electroneg:2.20,ionization:1312},
            {z:2,sym:'He',name:'Helioa',mass:4.0026,val:[0],config:'1s2',group:'noble',x:18,y:1,radius:31,electroneg:0,ionization:2372},
            {z:3,sym:'Li',name:'Litioa',mass:6.94,val:[1],config:'[He] 2s1',group:'alkali',x:1,y:2,radius:167,electroneg:0.98,ionization:520},
            {z:4,sym:'Be',name:'Berilioa',mass:9.0122,val:[2],config:'[He] 2s2',group:'alkaline',x:2,y:2,radius:112,electroneg:1.57,ionization:899},
            {z:5,sym:'B',name:'Boroa',mass:10.81,val:[3],config:'[He] 2s2 2p1',group:'metalloid',x:13,y:2,radius:87,electroneg:2.04,ionization:801},
            {z:6,sym:'C',name:'Karbonoa',mass:12.011,val:[-4,2,4],config:'[He] 2s2 2p2',group:'nonmetal',x:14,y:2,radius:67,electroneg:2.55,ionization:1086},
            {z:7,sym:'N',name:'Nitrogenoa',mass:14.007,val:[-3,1,3,5],config:'[He] 2s2 2p3',group:'nonmetal',x:15,y:2,radius:56,electroneg:3.04,ionization:1402},
            {z:8,sym:'O',name:'Oxigenoa',mass:15.999,val:[-2,-1],config:'[He] 2s2 2p4',group:'nonmetal',x:16,y:2,radius:48,electroneg:3.44,ionization:1314},
            {z:9,sym:'F',name:'Fluorra',mass:18.998,val:[-1],config:'[He] 2s2 2p5',group:'halogen',x:17,y:2,radius:42,electroneg:3.98,ionization:1681},
            {z:10,sym:'Ne',name:'Neona',mass:20.180,val:[0],config:'[He] 2s2 2p6',group:'noble',x:18,y:2,radius:38,electroneg:0,ionization:2081},
            {z:11,sym:'Na',name:'Sodioa',mass:22.990,val:[1],config:'[Ne] 3s1',group:'alkali',x:1,y:3,radius:190,electroneg:0.93,ionization:496},
            {z:12,sym:'Mg',name:'Magnesioa',mass:24.305,val:[2],config:'[Ne] 3s2',group:'alkaline',x:2,y:3,radius:145,electroneg:1.31,ionization:738},
            {z:13,sym:'Al',name:'Aluminioa',mass:26.982,val:[3],config:'[Ne] 3s2 3p1',group:'post-transition',x:13,y:3,radius:118,electroneg:1.61,ionization:577},
            {z:14,sym:'Si',name:'Silizioa',mass:28.085,val:[-4,4],config:'[Ne] 3s2 3p2',group:'metalloid',x:14,y:3,radius:111,electroneg:1.90,ionization:786},
            {z:15,sym:'P',name:'Fosforoa',mass:30.974,val:[-3,3,5],config:'[Ne] 3s2 3p3',group:'nonmetal',x:15,y:3,radius:98,electroneg:2.19,ionization:1012},
            {z:16,sym:'S',name:'Sufrea',mass:32.06,val:[-2,2,4,6],config:'[Ne] 3s2 3p4',group:'nonmetal',x:16,y:3,radius:88,electroneg:2.58,ionization:1000},
            {z:17,sym:'Cl',name:'Kloroa',mass:35.45,val:[-1,1,3,5,7],config:'[Ne] 3s2 3p5',group:'halogen',x:17,y:3,radius:79,electroneg:3.16,ionization:1251},
            {z:18,sym:'Ar',name:'Argona',mass:39.948,val:[0],config:'[Ne] 3s2 3p6',group:'noble',x:18,y:3,radius:71,electroneg:0,ionization:1521},
            {z:19,sym:'K',name:'Potasioa',mass:39.098,val:[1],config:'[Ar] 4s1',group:'alkali',x:1,y:4,radius:243,electroneg:0.82,ionization:419},
            {z:20,sym:'Ca',name:'Kaltzioa',mass:40.078,val:[2],config:'[Ar] 4s2',group:'alkaline',x:2,y:4,radius:194,electroneg:1.00,ionization:590},
            {z:21,sym:'Sc',name:'Eskandioa',mass:44.956,val:[3],config:'[Ar] 3d1 4s2',group:'transition',x:3,y:4,radius:184,electroneg:1.36,ionization:631},
            {z:22,sym:'Ti',name:'Titanioa',mass:47.867,val:[2,3,4],config:'[Ar] 3d2 4s2',group:'transition',x:4,y:4,radius:176,electroneg:1.54,ionization:658},
            {z:23,sym:'V',name:'Banadioa',mass:50.942,val:[2,3,4,5],config:'[Ar] 3d3 4s2',group:'transition',x:5,y:4,radius:171,electroneg:1.63,ionization:650},
            {z:24,sym:'Cr',name:'Kromoa',mass:51.996,val:[2,3,6],config:'[Ar] 3d5 4s1',group:'transition',x:6,y:4,radius:166,electroneg:1.66,ionization:653},
            {z:25,sym:'Mn',name:'Manganesoa',mass:54.938,val:[2,3,4,6,7],config:'[Ar] 3d5 4s2',group:'transition',x:7,y:4,radius:161,electroneg:1.55,ionization:717},
            {z:26,sym:'Fe',name:'Burdina',mass:55.845,val:[2,3],config:'[Ar] 3d6 4s2',group:'transition',x:8,y:4,radius:156,electroneg:1.83,ionization:762},
            {z:27,sym:'Co',name:'Kobaltoa',mass:58.933,val:[2,3],config:'[Ar] 3d7 4s2',group:'transition',x:9,y:4,radius:152,electroneg:1.88,ionization:760},
            {z:28,sym:'Ni',name:'Nikela',mass:58.693,val:[2,3],config:'[Ar] 3d8 4s2',group:'transition',x:10,y:4,radius:149,electroneg:1.91,ionization:737},
            {z:29,sym:'Cu',name:'Kobrea',mass:63.546,val:[1,2],config:'[Ar] 3d10 4s1',group:'transition',x:11,y:4,radius:145,electroneg:1.90,ionization:745},
            {z:30,sym:'Zn',name:'Zinka',mass:65.38,val:[2],config:'[Ar] 3d10 4s2',group:'transition',x:12,y:4,radius:142,electroneg:1.65,ionization:906},
            {z:31,sym:'Ga',name:'Galioa',mass:69.723,val:[3],config:'[Ar] 3d10 4s2 4p1',group:'post-transition',x:13,y:4,radius:136,electroneg:1.81,ionization:579},
            {z:32,sym:'Ge',name:'Germanioa',mass:72.630,val:[4],config:'[Ar] 3d10 4s2 4p2',group:'metalloid',x:14,y:4,radius:125,electroneg:2.01,ionization:762},
            {z:33,sym:'As',name:'Artsenikoa',mass:74.922,val:[-3,3,5],config:'[Ar] 3d10 4s2 4p3',group:'metalloid',x:15,y:4,radius:114,electroneg:2.18,ionization:947},
            {z:34,sym:'Se',name:'Selenioa',mass:78.971,val:[-2,2,4,6],config:'[Ar] 3d10 4s2 4p4',group:'nonmetal',x:16,y:4,radius:103,electroneg:2.55,ionization:941},
            {z:35,sym:'Br',name:'Bromoa',mass:79.904,val:[-1,1,3,5,7],config:'[Ar] 3d10 4s2 4p5',group:'halogen',x:17,y:4,radius:94,electroneg:2.96,ionization:1140},
            {z:36,sym:'Kr',name:'Kriptona',mass:83.798,val:[0,2],config:'[Ar] 3d10 4s2 4p6',group:'noble',x:18,y:4,radius:88,electroneg:3.00,ionization:1351},
            {z:37,sym:'Rb',name:'Rubidioa',mass:85.468,val:[1],config:'[Kr] 5s1',group:'alkali',x:1,y:5,radius:265,electroneg:0.82,ionization:403},
            {z:38,sym:'Sr',name:'Estrontzioa',mass:87.62,val:[2],config:'[Kr] 5s2',group:'alkaline',x:2,y:5,radius:219,electroneg:0.95,ionization:549},
            {z:39,sym:'Y',name:'Itrioa',mass:88.906,val:[3],config:'[Kr] 4d1 5s2',group:'transition',x:3,y:5,radius:212,electroneg:1.22,ionization:600},
            {z:40,sym:'Zr',name:'Zirkonioa',mass:91.224,val:[4],config:'[Kr] 4d2 5s2',group:'transition',x:4,y:5,radius:206,electroneg:1.33,ionization:640},
            {z:41,sym:'Nb',name:'Niobioa',mass:92.906,val:[3,5],config:'[Kr] 4d4 5s1',group:'transition',x:5,y:5,radius:198,electroneg:1.6,ionization:652},
            {z:42,sym:'Mo',name:'Molibdenoa',mass:95.95,val:[2,3,4,5,6],config:'[Kr] 4d5 5s1',group:'transition',x:6,y:5,radius:190,electroneg:2.16,ionization:684},
            {z:43,sym:'Tc',name:'Teknezioa',mass:98,val:[4,7],config:'[Kr] 4d5 5s2',group:'transition',x:7,y:5,radius:183,electroneg:1.9,ionization:702},
            {z:44,sym:'Ru',name:'Rutenioa',mass:101.07,val:[3,4,6,8],config:'[Kr] 4d7 5s1',group:'transition',x:8,y:5,radius:178,electroneg:2.2,ionization:710},
            {z:45,sym:'Rh',name:'Rodioa',mass:102.91,val:[3,4],config:'[Kr] 4d8 5s1',group:'transition',x:9,y:5,radius:173,electroneg:2.28,ionization:720},
            {z:46,sym:'Pd',name:'Paladioa',mass:106.42,val:[2,4],config:'[Kr] 4d10',group:'transition',x:10,y:5,radius:169,electroneg:2.20,ionization:804},
            {z:47,sym:'Ag',name:'Zilarra',mass:107.87,val:[1],config:'[Kr] 4d10 5s1',group:'transition',x:11,y:5,radius:165,electroneg:1.93,ionization:731},
            {z:48,sym:'Cd',name:'Kadmioa',mass:112.41,val:[2],config:'[Kr] 4d10 5s2',group:'transition',x:12,y:5,radius:161,electroneg:1.69,ionization:867},
            {z:49,sym:'In',name:'Indioa',mass:114.82,val:[3],config:'[Kr] 4d10 5s2 5p1',group:'post-transition',x:13,y:5,radius:156,electroneg:1.78,ionization:558},
            {z:50,sym:'Sn',name:'Eztainua',mass:118.71,val:[2,4],config:'[Kr] 4d10 5s2 5p2',group:'post-transition',x:14,y:5,radius:145,electroneg:1.96,ionization:709},
            {z:51,sym:'Sb',name:'Antimonioa',mass:121.76,val:[-3,3,5],config:'[Kr] 4d10 5s2 5p3',group:'metalloid',x:15,y:5,radius:133,electroneg:2.05,ionization:834},
            {z:52,sym:'Te',name:'Telurioa',mass:127.60,val:[-2,2,4,6],config:'[Kr] 4d10 5s2 5p4',group:'metalloid',x:16,y:5,radius:123,electroneg:2.1,ionization:869},
            {z:53,sym:'I',name:'Iodoa',mass:126.90,val:[-1,1,3,5,7],config:'[Kr] 4d10 5s2 5p5',group:'halogen',x:17,y:5,radius:115,electroneg:2.66,ionization:1008},
            {z:54,sym:'Xe',name:'Xenona',mass:131.29,val:[0,2,4,6,8],config:'[Kr] 4d10 5s2 5p6',group:'noble',x:18,y:5,radius:108,electroneg:2.6,ionization:1170},
            {z:55,sym:'Cs',name:'Zesioa',mass:132.91,val:[1],config:'[Xe] 6s1',group:'alkali',x:1,y:6,radius:298,electroneg:0.79,ionization:376},
            {z:56,sym:'Ba',name:'Barioa',mass:137.33,val:[2],config:'[Xe] 6s2',group:'alkaline',x:2,y:6,radius:253,electroneg:0.89,ionization:503},
            {z:72,sym:'Hf',name:'Hafnioa',mass:178.49,val:[4],config:'[Xe] 4f14 5d2 6s2',group:'transition',x:4,y:6,radius:208,electroneg:1.3,ionization:658},
            {z:73,sym:'Ta',name:'Tantaloa',mass:180.95,val:[5],config:'[Xe] 4f14 5d3 6s2',group:'transition',x:5,y:6,radius:200,electroneg:1.5,ionization:761},
            {z:74,sym:'W',name:'Wolframa',mass:183.84,val:[4,6],config:'[Xe] 4f14 5d4 6s2',group:'transition',x:6,y:6,radius:193,electroneg:2.36,ionization:770},
            {z:75,sym:'Re',name:'Renioa',mass:186.21,val:[-1,2,4,6,7],config:'[Xe] 4f14 5d5 6s2',group:'transition',x:7,y:6,radius:188,electroneg:1.9,ionization:760},
            {z:76,sym:'Os',name:'Osmioa',mass:190.23,val:[2,3,4,6,8],config:'[Xe] 4f14 5d6 6s2',group:'transition',x:8,y:6,radius:185,electroneg:2.2,ionization:840},
            {z:77,sym:'Ir',name:'Iridioa',mass:192.22,val:[3,4,6],config:'[Xe] 4f14 5d7 6s2',group:'transition',x:9,y:6,radius:180,electroneg:2.20,ionization:880},
            {z:78,sym:'Pt',name:'Platinoa',mass:195.08,val:[2,4],config:'[Xe] 4f14 5d9 6s1',group:'transition',x:10,y:6,radius:177,electroneg:2.28,ionization:870},
            {z:79,sym:'Au',name:'Urrea',mass:196.97,val:[1,3],config:'[Xe] 4f14 5d10 6s1',group:'transition',x:11,y:6,radius:174,electroneg:2.54,ionization:890},
            {z:80,sym:'Hg',name:'Merkurioa',mass:200.59,val:[1,2],config:'[Xe] 4f14 5d10 6s2',group:'transition',x:12,y:6,radius:171,electroneg:2.00,ionization:1007},
            {z:81,sym:'Tl',name:'Talioa',mass:204.38,val:[1,3],config:'[Xe] 4f14 5d10 6s2 6p1',group:'post-transition',x:13,y:6,radius:156,electroneg:1.62,ionization:589},
            {z:82,sym:'Pb',name:'Beruna',mass:207.2,val:[2,4],config:'[Xe] 4f14 5d10 6s2 6p2',group:'post-transition',x:14,y:6,radius:154,electroneg:1.87,ionization:716},
            {z:83,sym:'Bi',name:'Bismutoa',mass:208.98,val:[3,5],config:'[Xe] 4f14 5d10 6s2 6p3',group:'post-transition',x:15,y:6,radius:143,electroneg:2.02,ionization:703},
            {z:84,sym:'Po',name:'Polonioa',mass:209,val:[-2,2,4,6],config:'[Xe] 4f14 5d10 6s2 6p4',group:'metalloid',x:16,y:6,radius:135,electroneg:2.0,ionization:812},
            {z:85,sym:'At',name:'Astatoa',mass:210,val:[-1,1,3,5,7],config:'[Xe] 4f14 5d10 6s2 6p5',group:'halogen',x:17,y:6,radius:127,electroneg:2.2,ionization:930},
            {z:86,sym:'Rn',name:'Radona',mass:222,val:[0,2],config:'[Xe] 4f14 5d10 6s2 6p6',group:'noble',x:18,y:6,radius:120,electroneg:0,ionization:1037},
            {z:87,sym:'Fr',name:'Frantzioa',mass:223,val:[1],config:'[Rn] 7s1',group:'alkali',x:1,y:7,radius:0,electroneg:0.7,ionization:380},
            {z:88,sym:'Ra',name:'Radioa',mass:226,val:[2],config:'[Rn] 7s2',group:'alkaline',x:2,y:7,radius:0,electroneg:0.9,ionization:509},
            {z:104,sym:'Rf',name:'Rutherfordio',mass:267,val:[4],config:'[Rn] 5f14 6d2 7s2',group:'transition',x:4,y:7,radius:0,electroneg:0,ionization:580},
            {z:105,sym:'Db',name:'Dubnioa',mass:268,val:[5],config:'[Rn] 5f14 6d3 7s2',group:'transition',x:5,y:7,radius:0,electroneg:0,ionization:0},
            {z:106,sym:'Sg',name:'Seaborgioa',mass:271,val:[6],config:'[Rn] 5f14 6d4 7s2',group:'transition',x:6,y:7,radius:0,electroneg:0,ionization:0},
            {z:107,sym:'Bh',name:'Bohrioa',mass:270,val:[7],config:'[Rn] 5f14 6d5 7s2',group:'transition',x:7,y:7,radius:0,electroneg:0,ionization:0},
            {z:108,sym:'Hs',name:'Hassioa',mass:269,val:[6,8],config:'[Rn] 5f14 6d6 7s2',group:'transition',x:8,y:7,radius:0,electroneg:0,ionization:0},
            {z:109,sym:'Mt',name:'Meitnerioa',mass:278,val:[],config:'‚Äî',group:'transition',x:9,y:7,radius:0,electroneg:0,ionization:0},
            {z:110,sym:'Ds',name:'Darmstadtioa',mass:281,val:[],config:'‚Äî',group:'transition',x:10,y:7,radius:0,electroneg:0,ionization:0},
            {z:111,sym:'Rg',name:'Roentgenioa',mass:282,val:[],config:'‚Äî',group:'transition',x:11,y:7,radius:0,electroneg:0,ionization:0},
            {z:112,sym:'Cn',name:'Kopernizioa',mass:285,val:[],config:'[Rn] 5f14 6d10 7s2',group:'transition',x:12,y:7,radius:0,electroneg:0,ionization:0},
            {z:113,sym:'Nh',name:'Nihonioa',mass:286,val:[],config:'[Rn] 5f14 6d10 7s2 7p1',group:'post-transition',x:13,y:7,radius:0,electroneg:0,ionization:0},
            {z:114,sym:'Fl',name:'Flevorioa',mass:289,val:[],config:'‚Äî',group:'post-transition',x:14,y:7,radius:0,electroneg:0,ionization:0},
            {z:115,sym:'Mc',name:'Moskovioa',mass:289,val:[],config:'‚Äî',group:'post-transition',x:15,y:7,radius:0,electroneg:0,ionization:0},
            {z:116,sym:'Lv',name:'Livermorioa',mass:293,val:[],config:'‚Äî',group:'post-transition',x:16,y:7,radius:0,electroneg:0,ionization:0},
            {z:117,sym:'Ts',name:'Tenesoa',mass:294,val:[],config:'‚Äî',group:'halogen',x:17,y:7,radius:0,electroneg:0,ionization:0},
            {z:118,sym:'Og',name:'Oganesona',mass:294,val:[0],config:'‚Äî',group:'noble',x:18,y:7,radius:0,electroneg:0,ionization:0}
        ];

        const lanthanides = [
            {z:57,sym:'La',name:'Lantanoa',mass:138.91,val:[3],config:'[Xe] 5d1 6s2',group:'lanthanide',x:3,radius:187,electroneg:1.1,ionization:538},
            {z:58,sym:'Ce',name:'Zerioa',mass:140.12,val:[3,4],config:'[Xe] 4f1 5d1 6s2',group:'lanthanide',x:4,radius:181,electroneg:1.12,ionization:534},
            {z:59,sym:'Pr',name:'Praseodimio',mass:140.91,val:[3,4],config:'[Xe] 4f3 6s2',group:'lanthanide',x:5,radius:182,electroneg:1.13,ionization:527},
            {z:60,sym:'Nd',name:'Neodimioa',mass:144.24,val:[3],config:'[Xe] 4f4 6s2',group:'lanthanide',x:6,radius:181,electroneg:1.14,ionization:533},
            {z:61,sym:'Pm',name:'Prometioa',mass:145,val:[3],config:'[Xe] 4f5 6s2',group:'lanthanide',x:7,radius:183,electroneg:1.13,ionization:540},
            {z:62,sym:'Sm',name:'Samarioa',mass:150.36,val:[2,3],config:'[Xe] 4f6 6s2',group:'lanthanide',x:8,radius:180,electroneg:1.17,ionization:544},
            {z:63,sym:'Eu',name:'Europioa',mass:151.96,val:[2,3],config:'[Xe] 4f7 6s2',group:'lanthanide',x:9,radius:199,electroneg:1.2,ionization:547},
            {z:64,sym:'Gd',name:'Gadolinioa',mass:157.25,val:[3],config:'[Xe] 4f7 5d1 6s2',group:'lanthanide',x:10,radius:179,electroneg:1.2,ionization:593},
            {z:65,sym:'Tb',name:'Terbioa',mass:158.93,val:[3,4],config:'[Xe] 4f9 6s2',group:'lanthanide',x:11,radius:176,electroneg:1.2,ionization:565},
            {z:66,sym:'Dy',name:'Disprosioa',mass:162.50,val:[3],config:'[Xe] 4f10 6s2',group:'lanthanide',x:12,radius:175,electroneg:1.22,ionization:572},
            {z:67,sym:'Ho',name:'Holmioa',mass:164.93,val:[3],config:'[Xe] 4f11 6s2',group:'lanthanide',x:13,radius:174,electroneg:1.23,ionization:581},
            {z:68,sym:'Er',name:'Erbioa',mass:167.26,val:[3],config:'[Xe] 4f12 6s2',group:'lanthanide',x:14,radius:173,electroneg:1.24,ionization:589},
            {z:69,sym:'Tm',name:'Tulioa',mass:168.93,val:[2,3],config:'[Xe] 4f13 6s2',group:'lanthanide',x:15,radius:172,electroneg:1.25,ionization:596},
            {z:70,sym:'Yb',name:'Iterbioa',mass:173.05,val:[2,3],config:'[Xe] 4f14 6s2',group:'lanthanide',x:16,radius:194,electroneg:1.1,ionization:603},
            {z:71,sym:'Lu',name:'Lutezioa',mass:174.97,val:[3],config:'[Xe] 4f14 5d1 6s2',group:'lanthanide',x:17,radius:172,electroneg:1.27,ionization:524}
        ];

        const actinides = [
            {z:89,sym:'Ac',name:'Aktinioa',mass:227,val:[3],config:'[Rn] 6d1 7s2',group:'actinide',x:3,radius:188,electroneg:1.1,ionization:499},
            {z:90,sym:'Th',name:'Torioa',mass:232.04,val:[4],config:'[Rn] 6d2 7s2',group:'actinide',x:4,radius:179,electroneg:1.3,ionization:587},
            {z:91,sym:'Pa',name:'Protaktinio',mass:231.04,val:[4,5],config:'[Rn] 5f2 6d1 7s2',group:'actinide',x:5,radius:163,electroneg:1.5,ionization:568},
            {z:92,sym:'U',name:'Uranioa',mass:238.03,val:[3,4,5,6],config:'[Rn] 5f3 6d1 7s2',group:'actinide',x:6,radius:156,electroneg:1.38,ionization:597},
            {z:93,sym:'Np',name:'Neptunioa',mass:237,val:[3,4,5,6,7],config:'[Rn] 5f4 6d1 7s2',group:'actinide',x:7,radius:155,electroneg:1.36,ionization:604},
            {z:94,sym:'Pu',name:'Plutonioa',mass:244,val:[3,4,5,6,7],config:'[Rn] 5f6 7s2',group:'actinide',x:8,radius:159,electroneg:1.28,ionization:584},
            {z:95,sym:'Am',name:'Amerizioa',mass:243,val:[3,4,5,6],config:'[Rn] 5f7 7s2',group:'actinide',x:9,radius:173,electroneg:1.13,ionization:578},
            {z:96,sym:'Cm',name:'Kurioa',mass:247,val:[3,4],config:'[Rn] 5f7 6d1 7s2',group:'actinide',x:10,radius:174,electroneg:1.28,ionization:581},
            {z:97,sym:'Bk',name:'Berkelioa',mass:247,val:[3,4],config:'[Rn] 5f9 7s2',group:'actinide',x:11,radius:170,electroneg:1.3,ionization:601},
            {z:98,sym:'Cf',name:'Kalifornioa',mass:251,val:[3],config:'[Rn] 5f10 7s2',group:'actinide',x:12,radius:186,electroneg:1.3,ionization:608},
            {z:99,sym:'Es',name:'Einsteinioa',mass:252,val:[3],config:'[Rn] 5f11 7s2',group:'actinide',x:13,radius:186,electroneg:1.3,ionization:619},
            {z:100,sym:'Fm',name:'Fermioa',mass:257,val:[3],config:'[Rn] 5f12 7s2',group:'actinide',x:14,radius:0,electroneg:1.3,ionization:627},
            {z:101,sym:'Md',name:'Mendelevioa',mass:258,val:[2,3],config:'[Rn] 5f13 7s2',group:'actinide',x:15,radius:0,electroneg:1.3,ionization:635},
            {z:102,sym:'No',name:'Nobelioa',mass:259,val:[2,3],config:'[Rn] 5f14 7s2',group:'actinide',x:16,radius:0,electroneg:1.3,ionization:642},
            {z:103,sym:'Lr',name:'Lawrentzioa',mass:266,val:[3],config:'[Rn] 5f14 7s2 7p1',group:'actinide',x:17,radius:0,electroneg:0,ionization:470}
        ];

        // Referencias a elementos DOM
        const mainScreen = document.getElementById('mainScreen');
        const tableScreen = document.getElementById('tableScreen');
        const orbitalsScreen = document.getElementById('orbitalsScreen');
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        const elementInfo = document.getElementById('elementInfo');
        const showTableBtn = document.getElementById('showTableBtn');
        const showOrbitalsBtn = document.getElementById('showOrbitalsBtn');
        const backFromTableBtn = document.getElementById('backFromTableBtn');
        const backFromOrbitalsBtn = document.getElementById('backFromOrbitalsBtn');
        const toggleElec = document.getElementById('toggleElec');
        const toggleElectroneg = document.getElementById('toggleElectroneg');
        const toggleRadius = document.getElementById('toggleRadius');
        const toggleIonization = document.getElementById('toggleIonization');
        const table = document.getElementById('table');
        const lanthanidesContainer = document.getElementById('lanthanides');
        const actinidesContainer = document.getElementById('actinides');
        const orbitalViewer = document.getElementById('orbitalViewer');
        const orbitalCanvas = document.getElementById('orbitalCanvas');
        const orbitalLoading = document.getElementById('orbitalLoading');
        const orbitalInfo = document.getElementById('orbitalInfo');
        const orbitalInfoTitle = document.getElementById('orbitalInfoTitle');
        const orbitalInfoDesc = document.getElementById('orbitalInfoDesc');
        const resetOrbitalView = document.getElementById('resetOrbitalView');
        const autoRotateOrbital = document.getElementById('autoRotateOrbital');
        const orbitalButtons = document.querySelectorAll('.orbital-btn');
        const categoryHeaders = document.querySelectorAll('.orbital-category-header');

        // Variables de estado
        let currentDisplayMode = 'normal'; // 'normal', 'elec', 'electroneg', 'radius', 'ionization'
        let currentModel = null;
        let isAutoRotating = false;
        let scene, camera, renderer, controls;
        let orbitalModels = {};

        // Informaci√≥n sobre los orbitales
        const orbitalInfoData = {
            's': {
                title: 's Orbitala',
                desc: 'Orbital esferikoa, simetria osoa du. Elektroi dentsitatea zentroan handiena da.'
            },
            'p': {
                title: 'p Orbitalak',
                desc: 'Orbital p guztien multzoa. Hiru orbital mota ditu: p‚Çì, p·µß eta p‚ÇÇ, norabide bakoitzean orientatuak.'
            },
            'px': {
                title: 'p‚Çì Orbitala',
                desc: 'Orbital p bat, ardatz x-aren inguruan orientatuta. Bi lobulu ditu.'
            },
            'py': {
                title: 'p·µß Orbitala',
                desc: 'Orbital p bat, ardatz y-aren inguruan orientatuta. Bi lobulu ditu.'
            },
            'pz': {
                title: 'p‚ÇÇ Orbitala',
                desc: 'Orbital p bat, ardatz z-aren inguruan orientatuta. Bi lobulu ditu.'
            },
            'dxy': {
                title: 'd‚Çì·µß Orbitala',
                desc: 'Orbital d bat, ardatz x-y planoan kokatuta. Lau lobulu ditu.'
            },
            'dx2y2': {
                title: 'd‚Çì¬≤‚Çã·µß¬≤ Orbitala',
                desc: 'Orbital d bat, ardatz x eta y artean orientatuta. Lau lobulu ditu.'
            },
            'dyz': {
                title: 'd·µß‚ÇÇ Orbitala',
                desc: 'Orbital d bat, ardatz y-z planoan kokatuta. Lau lobulu ditu.'
            },
            'dzx': {
                title: 'd‚ÇÇ‚Çì Orbitala',
                desc: 'Orbital d bat, ardatz z-x planoan kokatuta. Lau lobulu ditu.'
            },
            'dz2': {
                title: 'd‚ÇÇ¬≤ Orbitala',
                desc: 'Orbital d bat, ardatz z-aren inguruan orientatuta. Hiru lobulu ditu.'
            },
            'f1': {
                title: 'f‚ÇÅ Orbitala',
                desc: 'Orbital f bat, konplexutasun handikoa. Zortzi lobulu ditu.'
            },
            'f2': {
                title: 'f‚ÇÇ Orbitala',
                desc: 'Orbital f bat, konplexutasun handikoa. Zortzi lobulu ditu.'
            },
            'f3': {
                title: 'f‚ÇÉ Orbitala',
                desc: 'Orbital f bat, konplexutasun handikoa. Zortzi lobulu ditu.'
            },
            'f4': {
                title: 'f‚ÇÑ Orbitala',
                desc: 'Orbital f bat, konplexutasun handikoa. Zortzi lobulu ditu.'
            },
            'f5': {
                title: 'f‚ÇÖ Orbitala',
                desc: 'Orbital f bat, konplexutasun handikoa. Zortzi lobulu ditu.'
            },
            'f6': {
                title: 'f‚ÇÜ Orbitala',
                desc: 'Orbital f bat, konplexutasun handikoa. Zortzi lobulu ditu.'
            },
            'f7': {
                title: 'f‚Çá Orbitala',
                desc: 'Orbital f bat, konplexutasun handikoa. Zortzi lobulu ditu.'
            }
        };

        // Funcionalidad de b√∫squeda
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase().trim();
            searchResults.innerHTML = '';
            
            if (searchTerm.length < 2) {
                searchResults.style.display = 'none';
                return;
            }
            
            const allElements = [...elements, ...lanthanides, ...actinides];
            const matches = allElements.filter(el => 
                el.name.toLowerCase().includes(searchTerm) ||
                el.sym.toLowerCase().includes(searchTerm) ||
                el.z.toString().includes(searchTerm)
            );
            
            if (matches.length > 0) {
                matches.forEach(el => {
                    const item = document.createElement('div');
                    item.className = 'search-result-item';
                    item.innerHTML = `
                        <span class="sym">${el.sym}</span>
                        <span class="name">${el.name}</span>
                        <span class="z">${el.z}</span>
                    `;
                    item.addEventListener('click', () => {
                        showElementInfo(el);
                        searchResults.style.display = 'none';
                        searchInput.value = '';
                    });
                    searchResults.appendChild(item);
                });
                searchResults.style.display = 'block';
            } else {
                searchResults.style.display = 'none';
            }
        });

        // Mostrar informaci√≥n del elemento
        function showElementInfo(el) {
            document.getElementById('elementName').textContent = el.name;
            document.getElementById('elementZ').textContent = `Z = ${el.z}`;
            document.getElementById('elementSquare').textContent = el.sym;
            document.getElementById('elementSquare').style.background = getGroupColor(el.group);
            
            document.getElementById('detailZ').textContent = el.z;
            document.getElementById('detailMass').textContent = el.mass ? el.mass + ' u' : '‚Äî';
            document.getElementById('detailVal').textContent = (el.val && el.val.length) ? el.val.join(', ') : '‚Äî';
            document.getElementById('detailConfig').textContent = el.config || '‚Äî';
            
            const electronegDisplay = document.getElementById('detailElectroneg');
            if (el.electroneg && el.electroneg > 0) {
                electronegDisplay.textContent = el.electroneg.toFixed(2);
            } else {
                electronegDisplay.textContent = 'Ezezaguna';
            }
            
            const radiusDisplay = document.getElementById('detailRadius');
            if (el.radius && el.radius > 0) {
                radiusDisplay.textContent = el.radius + ' pm';
            } else {
                radiusDisplay.textContent = 'Ezezaguna';
            }
            
            const ionizationDisplay = document.getElementById('detailIonization');
            if (el.ionization && el.ionization > 0) {
                ionizationDisplay.textContent = el.ionization + ' kJ/mol';
            } else {
                ionizationDisplay.textContent = 'Ezezaguna';
            }
            
            elementInfo.style.display = 'block';
        }

        // Obtener color por grupo
        function getGroupClass(group) {
            switch(group) {
                case 'alkali': return 'alkali';
                case 'alkaline': return 'alkaline';
                case 'lanthanide': return 'lanthanide';
                case 'actinide': return 'actinide';
                case 'transition': return 'transition';
                case 'post-transition': return 'post-transition';
                case 'metalloid': return 'metalloid';
                case 'nonmetal': return 'nonmetal';
                case 'halogen': return 'halogen';
                case 'noble': return 'noble';
                default: return 'other';
            }
        }

        function getGroupColor(group) {
            switch(group) {
                case 'alkali': return '#FFB6C1';
                case 'alkaline': return '#FFD8B1';
                case 'lanthanide': return '#C9E4DE';
                case 'actinide': return '#D8BFD8';
                case 'transition': return '#B0E0E6';
                case 'post-transition': return '#E6E6FA';
                case 'metalloid': return '#98FB98';
                case 'nonmetal': return '#F0E68C';
                case 'halogen': return '#FFDEAD';
                case 'noble': return '#DDA0DD';
                default: return '#F5F5F5';
            }
        }

        // Crear tabla peri√≥dica
        function createPeriodicTable() {
            table.innerHTML = '';
            lanthanidesContainer.innerHTML = '';
            actinidesContainer.innerHTML = '';
            
            // Crear celdas de la tabla principal
            elements.forEach(el => {
                const cell = document.createElement('div');
                cell.className = `cell ${getGroupClass(el.group)}`;
                cell.style.gridColumn = el.x;
                cell.style.gridRow = el.y;
                cell.dataset.z = el.z;
                cell.innerHTML = `
                    <div class="num">${el.z}</div>
                    <div class="sym">${el.sym}</div>
                    <div class="ename">${el.name}</div>
                `;
                cell.addEventListener('click', () => {
                    showElementInfo(el);
                    showScreen('main');
                });
                table.appendChild(cell);
            });
            
            // Crear lant√°nidos
            lanthanides.forEach(el => {
                const cell = document.createElement('div');
                cell.className = `cell ${getGroupClass(el.group)}`;
                cell.style.gridColumn = el.x - 2;
                cell.innerHTML = `
                    <div class="num">${el.z}</div>
                    <div class="sym">${el.sym}</div>
                    <div class="ename">${el.name}</div>
                `;
                cell.addEventListener('click', () => {
                    showElementInfo(el);
                    showScreen('main');
                });
                lanthanidesContainer.appendChild(cell);
            });
            
            // Crear act√≠nidos
            actinides.forEach(el => {
                const cell = document.createElement('div');
                cell.className = `cell ${getGroupClass(el.group)}`;
                cell.style.gridColumn = el.x - 2;
                cell.innerHTML = `
                    <div class="num">${el.z}</div>
                    <div class="sym">${el.sym}</div>
                    <div class="ename">${el.name}</div>
                `;
                cell.addEventListener('click', () => {
                    showElementInfo(el);
                    showScreen('main');
                });
                actinidesContainer.appendChild(cell);
            });
        }

        // Funciones para cambiar entre pantallas
        function showScreen(screen) {
            mainScreen.style.display = 'none';
            tableScreen.style.display = 'none';
            orbitalsScreen.style.display = 'none';
            
            switch(screen) {
                case 'main':
                    mainScreen.style.display = 'flex';
                    break;
                case 'table':
                    tableScreen.style.display = 'block';
                    break;
                case 'orbitals':
                    orbitalsScreen.style.display = 'block';
                    break;
            }
        }

        // Inicializar visualizador 3D de orbitales
        function initOrbitalViewer() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x0a0a0a);
            
            camera = new THREE.PerspectiveCamera(75, orbitalCanvas.clientWidth / orbitalCanvas.clientHeight, 0.1, 1000);
            camera.position.z = 150;
            
            renderer = new THREE.WebGLRenderer({ 
                canvas: orbitalCanvas, 
                antialias: true,
                alpha: true 
            });
            renderer.setSize(orbitalCanvas.clientWidth, orbitalCanvas.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(1, 1, 1);
            scene.add(directionalLight);
            
            function animate() {
                requestAnimationFrame(animate);
                
                if (isAutoRotating && currentModel) {
                    currentModel.rotation.y -= 0.005;
                }
                
                controls.update();
                renderer.render(scene, camera);
            }
            
            animate();
            
            window.addEventListener('resize', () => {
                camera.aspect = orbitalCanvas.clientWidth / orbitalCanvas.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(orbitalCanvas.clientWidth, orbitalCanvas.clientHeight);
            });
        }

        // Cargar modelo de orbital
        function loadOrbitalModel(modelName) {
            orbitalLoading.style.display = 'block';
            orbitalInfo.style.display = 'none';
            
            if (currentModel) {
                scene.remove(currentModel);
                currentModel = null;
            }
            
            if (orbitalModels[modelName]) {
                currentModel = orbitalModels[modelName].clone();
                scene.add(currentModel);
                orbitalLoading.style.display = 'none';
                orbitalInfo.style.display = 'block';
                updateOrbitalInfo(modelName);
                return;
            }
            
            // URL del modelo
            const modelUrl = `https://raw.githubusercontent.com/Mikelikoptero/Taularako-argazkiak/main/Orbitalak2/${modelName}.glb`;
            
            const loader = new THREE.GLTFLoader();
            
            loader.load(
                modelUrl,
                function(gltf) {
                    const model = gltf.scene;
                    model.scale.set(1, 1, 1);
                    model.position.set(0, 0, 0);
                    scene.add(model);
                    currentModel = model;
                    orbitalModels[modelName] = model.clone();
                    orbitalLoading.style.display = 'none';
                    orbitalInfo.style.display = 'block';
                    updateOrbitalInfo(modelName);
                },
                function(xhr) {
                    console.log((xhr.loaded / xhr.total * 100) + '% loaded');
                },
                function(error) {
                    console.error('Error loading model:', error);
                    orbitalLoading.textContent = 'Errorea modelo kargatzean';
                    createAlternativeRepresentation(modelName);
                }
            );
        }

        // Crear representaci√≥n alternativa si falla la carga
        function createAlternativeRepresentation(modelName) {
            orbitalLoading.style.display = 'none';
            orbitalInfo.style.display = 'block';
            
            let geometry, material;
            
            if (modelName === 's') {
                geometry = new THREE.SphereGeometry(1, 32, 32);
                material = new THREE.MeshPhongMaterial({ 
                    color: 0xff6b6b, 
                    transparent: true, 
                    opacity: 0.7,
                    wireframe: true
                });
                currentModel = new THREE.Mesh(geometry, material);
            } else if (modelName.startsWith('p')) {
                geometry = new THREE.SphereGeometry(0.5, 16, 16);
                material = new THREE.MeshPhongMaterial({ 
                    color: 0x6b8cff, 
                    transparent: true, 
                    opacity: 0.7,
                    wireframe: true
                });
                
                const lobe1 = new THREE.Mesh(geometry, material);
                const lobe2 = new THREE.Mesh(geometry, material);
                
                if (modelName === 'px') {
                    lobe1.position.x = 1.5;
                    lobe2.position.x = -1.5;
                } else if (modelName === 'py') {
                    lobe1.position.y = 1.5;
                    lobe2.position.y = -1.5;
                } else if (modelName === 'pz') {
                    lobe1.position.z = 1.5;
                    lobe2.position.z = -1.5;
                }
                
                const group = new THREE.Group();
                group.add(lobe1);
                group.add(lobe2);
                currentModel = group;
            } else if (modelName.startsWith('d')) {
                geometry = new THREE.TorusGeometry(1, 0.3, 16, 32);
                material = new THREE.MeshPhongMaterial({ 
                    color: 0x6bff8c, 
                    transparent: true, 
                    opacity: 0.7,
                    wireframe: true
                });
                currentModel = new THREE.Mesh(geometry, material);
            } else {
                geometry = new THREE.OctahedronGeometry(1, 1);
                material = new THREE.MeshPhongMaterial({ 
                    color: 0xff8c6b, 
                    transparent: true, 
                    opacity: 0.7,
                    wireframe: true
                });
                currentModel = new THREE.Mesh(geometry, material);
            }
            
            scene.add(currentModel);
            orbitalModels[modelName] = currentModel.clone();
            updateOrbitalInfo(modelName);
        }

        // Actualizar informaci√≥n del orbital
        function updateOrbitalInfo(modelName) {
            const info = orbitalInfoData[modelName] || {
                title: `${modelName} Orbitala`,
                desc: 'Orbital atomikoaren 3D errepresentazioa.'
            };
            
            orbitalInfoTitle.textContent = info.title;
            orbitalInfoDesc.textContent = info.desc;
        }

        // Inicializar men√∫s retr√°ctiles
        function initCollapsibleMenus() {
            categoryHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const category = this.parentElement;
                    category.classList.toggle('active');
                });
            });
        }

        // Event listeners
        showTableBtn.addEventListener('click', () => {
            showScreen('table');
            createPeriodicTable();
        });

        showOrbitalsBtn.addEventListener('click', () => {
            showScreen('orbitals');
            if (!renderer) {
                initOrbitalViewer();
            }
            initCollapsibleMenus();
        });

        backFromTableBtn.addEventListener('click', () => {
            showScreen('main');
        });

        backFromOrbitalsBtn.addEventListener('click', () => {
            showScreen('main');
        });

        // Toggles para cambiar modo de visualizaci√≥n de la tabla
        toggleElec.addEventListener('click', () => {
            toggleElec.classList.toggle('active');
            // Aqu√≠ ir√≠a la l√≥gica para cambiar a modo orbitales
        });

        toggleElectroneg.addEventListener('click', () => {
            toggleElectroneg.classList.toggle('active');
            // Aqu√≠ ir√≠a la l√≥gica para cambiar a modo electronegatividad
        });

        toggleRadius.addEventListener('click', () => {
            toggleRadius.classList.toggle('active');
            // Aqu√≠ ir√≠a la l√≥gica para cambiar a modo radio at√≥mico
        });

        toggleIonization.addEventListener('click', () => {
            toggleIonization.classList.toggle('active');
            // Aqu√≠ ir√≠a la l√≥gica para cambiar a modo ionizaci√≥n
        });

        // Event listeners para botones de orbitales
        orbitalButtons.forEach(button => {
            button.addEventListener('click', () => {
                orbitalButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                const modelName = button.dataset.model;
                orbitalViewer.style.display = 'block';
                loadOrbitalModel(modelName);
            });
        });

        resetOrbitalView.addEventListener('click', () => {
            if (controls) {
                controls.reset();
            }
        });

        autoRotateOrbital.addEventListener('click', () => {
            isAutoRotating = !isAutoRotating;
            autoRotateOrbital.textContent = isAutoRotating ? '‚è∏' : '‚ñ∂';
        });

        // Inicializaci√≥n
        createPeriodicTable();
        showElementInfo(elements[0]);
    </script>
</body>
</html>
